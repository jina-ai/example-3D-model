jtype: Flow
version: '1'
with:
  protocol: 'http'
  cors: True
  port_expose: $JINA_PORT
executors:
  - name: crafter
    uses: GlbCrafter  # Replace with jinahub+docker://GlbCrafter once memory leak is fixed
    py_modules:
      - executors/glb_crafter/glb_crafter.py
  - name: encoder
    uses: jinahub+docker://PNEncoder
    needs: crafter
  - name: indexer
    uses: jinahub://SimpleIndexer/v0.4
    volumes: $WORKSPACE_MOUNT
    needs: encoder
